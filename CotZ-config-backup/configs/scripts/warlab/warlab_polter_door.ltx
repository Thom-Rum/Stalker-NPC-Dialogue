;==============================================================
;
; warlab_polter_door.ltx
;	CoC 1.5b r4 - DoctorX Questlines 2.0
;
;	Modified by: DoctorX
;	Last revised: October 08, 2019
;
;==============================================================


[logic]


;//////////////////////////////////////////////////////////////////////////////////////////////////
;
; Poltergeist Door Initial State
;
;	Modified by DoctorX
;	for DoctorX Questlines 2.0
;	October 08, 2019
;
;--------------------------------------------------------------------------------------------------

; active = ph_door@horror_knock
active = ph_door@drx_ql_start

[ph_door@drx_ql_start]
locked = true
closed = true
on_info = {+drx_ql_has_warlab_access_card} ph_door@drx_ql_unlocked
on_use = {-drx_ql_has_warlab_access_card -warlab_kill_crazy_entity_task_started} %+warlab_door2_closed =give_task(drx_ql_special_task_find_warlab_access)%, {-drx_ql_has_warlab_access_card +warlab_kill_crazy_entity_task_started} %+warlab_door2_closed%
tip_open = drx_ql_tips_access_card_required
tip_close =
snd_open_start = trader_door_locked

[ph_door@drx_ql_unlocked]
locked = false
closed = true
on_use = ph_door@open %=remove_item(drx_ql_quest_item_access_card) +drx_ql_warlab_polter_door_open%
tip_open =
tip_close =
snd_open_start = trader_door_open_start

; \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\


[ph_door@horror_knock]
locked = true
closed = true
on_info = {~60 =actor_in_zone(warlab_door_marker)} ph_door@horror_wait %=hit_npc(warlab_point_knock:door:0:1500) =play_particle_on_path(hit_fx\hit_stucco_statik:warlab_knock_points:70) =play_sound(trader_door_close_stop)%, ph_door@horror_silence
on_info2 = {+warlab_main_polter_dead} ph_door@open %+warlab_open_door2 =play_sound(trader_door_unlock)%
tip_open = dar_poltergeist_hold_the_door
tip_close =

[ph_door@horror_wait]
locked = true
closed = true
on_timer = 2500| ph_door@horror_knock
on_info = {+warlab_main_polter_dead} ph_door@open %+warlab_open_door2 =play_sound(trader_door_unlock)%
on_use = {+warlab_main_polter_dead} ph_door@open, %+warlab_door2_closed%
tip_open = dar_poltergeist_hold_the_door
tip_close =

[ph_door@horror_silence]
locked = true
closed = true
on_timer = 2000| ph_door@horror_knock
on_info = {+warlab_main_polter_dead} ph_door@open %+warlab_open_door2 =play_sound(trader_door_unlock)%
on_use = {+warlab_main_polter_dead} ph_door@open, %+warlab_door2_closed%
tip_open = dar_poltergeist_hold_the_door
tip_close =

[ph_door@open]
locked = false
closed = false
tip_open =
tip_close =


;//////////////////////////////////////////////////////////////////////////////////////////////////
;
; Lock Door While Decoder Activated
;
;	Added by DoctorX
;	for DoctorX Questlines 2.0
;	May 14, 2018
;
;--------------------------------------------------------------------------------------------------

on_info = {+warlab_access_decoding} ph_door@drx_ql_door_locked

[ph_door@drx_ql_door_locked]
locked = true
closed = true
on_info = {+warlab_deactivate_generators_done} ph_door@drx_ql_door_open

[ph_door@drx_ql_door_open]
locked = false
closed = false

; \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
